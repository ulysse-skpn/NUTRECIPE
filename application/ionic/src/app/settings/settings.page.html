<ion-header>
  <ion-toolbar>
    <div class='header'>
      <ion-button fill="clear" (click)="dismissModal()">
        <ion-icon name="chevron-back"></ion-icon>
      </ion-button>
      <ion-title>Paramètres</ion-title>
      <ion-button fill="clear" (click)="toggleModif()" *ngIf="isModification">
        Annuler
      </ion-button>
      <ion-button fill="clear" (click)="toggleModif()" *ngIf="!isModification">
        modifier
      </ion-button>
      <ion-button fill="clear" (click)="saveModif()" *ngIf="isModification">
        OK
      </ion-button>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list mode="ios">

    <!-- TODO Faire un input pour chercher une image de profil -->
    <ion-list-header mode="ios">Informations utilisateur</ion-list-header>

    <form class="form-container" [formGroup]="settingsForm" (ngSubmit)="submitSettingsForm()">
      <ion-item>
        <ion-text>Identifiant</ion-text>
        <ion-text class="default" slot="end" *ngIf="isModification == false" >narestic</ion-text>
        <ion-input class="modif" slot="end" clearOnEdit="true" type="text" inputmode="text" placeholder="narestic" *ngIf="isModification == true" formControlName="identifiant"></ion-input>
      </ion-item>
  
      <ion-item>
        <ion-text>Email</ion-text>
        <ion-text class="default" slot="end" *ngIf="isModification == false" >email@mail.com</ion-text>
        <ion-input class="modif" slot="end" clearOnEdit="true" type="email" inputmode="email" placeholder="email@mail.com" *ngIf="isModification == true" formControlName="email"></ion-input>
      </ion-item>
  
      <ion-item>
        <ion-text>Mot de passe</ion-text>
        <ion-text class="default" slot="end" *ngIf="isModification == false" >**********</ion-text>
        <!-- <ion-input class="modif" slot="end" clearOnEdit="true" type="password" inputmode="password" placeholder="**********" *ngIf="isModification == true" formControlName="password"></ion-input> -->
        <ion-input class="modif" slot="end" clearOnEdit="true" [type]="isPasswordVisible ? text : password" inputmode="password" placeholder="**********" *ngIf="isModification == true" formControlName="password"></ion-input>
        <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()">
          <ion-icon name="eye-outline" *ngIf="isPasswordVisible == true"></ion-icon>
          <ion-icon name="eye-off-outline" *ngIf="isPasswordVisible == false"></ion-icon>
        </ion-button>
      </ion-item>
  
      <ion-item>
        <ion-text>N° téléphone</ion-text>
        <ion-text class="default" slot="end" *ngIf="isModification == false" >0102030405</ion-text>
        <ion-input class="modif" slot="end" clearOnEdit="true" type="tel" inputmode="tel" placeholder="0102030405" minlength="10" maxlength="10" *ngIf="isModification == true" formControlName="phoneNumber"></ion-input>
      </ion-item>
    </form>
    

    <ion-list-header mode="ios">Notifications</ion-list-header>

      <ion-item>
        <ion-text>Notification Push</ion-text>
        <ion-toggle color="secondary" mode="ios" slot="end" (ionChange)="togglePushNotifications()"></ion-toggle>
      </ion-item>

      <ion-item>
        <ion-text>Notification Email</ion-text>
        <ion-toggle color="secondary" mode="ios" slot="end" (ionChange)="toggleEmailNotifications()"></ion-toggle>
      </ion-item>

      <ion-item>
        <ion-text>Notification SMS</ion-text>
        <ion-toggle color="secondary" mode="ios" slot="end" (ionChange)="toggleSMSNotifications()"></ion-toggle>
      </ion-item>

    <ion-list-header mode="ios">Compte</ion-list-header>

    <ion-item>
      <ion-text>Reinitialiser le compte</ion-text>
      <ion-button fill="clear" slot="end" size="large" (click)="showAlertRebootAccount()">
        <ion-icon name="remove-circle-outline"></ion-icon>
      </ion-button>
    </ion-item>

    <ion-item>
      <ion-text color="danger">Suppresion du compte</ion-text>
      <ion-button fill="clear" slot="end" size="large" (click)="showAlertDeleteAccount()">
        <ion-icon name="remove-circle-outline"></ion-icon>
      </ion-button>
    </ion-item>

  </ion-list>
</ion-content>
